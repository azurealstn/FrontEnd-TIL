# Server Action

서버 액션(Server Action)이란 브라우저에서 호출할 수 있는 서버에서 실행되는 비동기 함수를 말한다. 즉, fromData로부터 사용자가 입력한 input 값을 꺼내와서 saveDb와 같은 특정 함수를 실행시켜서 DB에 데이터를 직접 저장을 한다거나 아예 SQL문을 직접 실행시켜서 데이터를 추가하는 등 서버에서만 실행할 수 있는 다양한 동작들을 이제는 클라이언트에서 수행할 수 있게 되는 것이다.

API로 호출하면 될 것을 Server Action을 굳이 사용하는 이유는 코드를 조금 더 간결하고 편리하게 사용할 수 있기 때문이다.

## 재검증

만약 리뷰를 작성하는 API를 호출하여 리뷰를 작성하면 화면에 바로 나타나지 않고 새로고침을 한번 해야 한다. 하지만 이러면 사용자 경험이 좋지 않기 때문에 이를 해결하기 위해 재검증을 이용한다.

```javascript
revalidatePath(`~path`);
```

위와 같이 revalidatePath 메서드를 이용하면 해당 경로에 해당하는 부분을 다시 생성(재검증)하기 때문에 해당 부분만 다시 렌더링된다.

revalidatePath를 사용하면 풀 라우트 캐시와 데이터 캐시 모두 제거하게 된다. 그리고 다시 백엔드 서버로부터 가져와서 데이터 캐시가 저장하게 되는데 이 떄 중요한 점은 풀 라우트 캐시에는 저장하지 않게 된다. 바로 사용자가 재요청했을 때 그 때 풀 라우트 캐시에 저장하게 된다. 이는 항상 최신의 데이터를 유지하기 위한 목적이 있다.

## 클라이언트에서의 서버 액션

지금까지의 문제

- 딜레이가 길어질수록 사용자는 아무런 피드백없이 계속 기다려야 함
- 폼에서 중복 제출이 가능함 (치명적인 에러)

위 문제를 해결하기 위해 React의 훅인 `useActionState` 메서드를 제공한다.
